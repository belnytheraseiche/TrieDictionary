<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
      <title>Class TreapRecordStore | BelNytheraSeiche.TrieDictionary </title>
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <meta name="title" content="Class TreapRecordStore | BelNytheraSeiche.TrieDictionary ">
      
      <meta name="description" content="A concrete implementation of  that uses a Treap.">
      <link rel="icon" href="../images/favicon.ico">
      <link rel="stylesheet" href="../public/docfx.min.css">
      <link rel="stylesheet" href="../public/main.css">
      <meta name="docfx:navrel" content="../toc.html">
      <meta name="docfx:tocrel" content="toc.html">
      
      <meta name="docfx:rel" content="../">
      
      
      
      <meta name="loc:inThisArticle" content="In this article">
      <meta name="loc:searchResultsCount" content="{count} results for &quot;{query}&quot;">
      <meta name="loc:searchNoResults" content="No results for &quot;{query}&quot;">
      <meta name="loc:tocFilter" content="Filter by title">
      <meta name="loc:nextArticle" content="Next">
      <meta name="loc:prevArticle" content="Previous">
      <meta name="loc:themeLight" content="Light">
      <meta name="loc:themeDark" content="Dark">
      <meta name="loc:themeAuto" content="Auto">
      <meta name="loc:changeTheme" content="Change theme">
      <meta name="loc:copy" content="Copy">
      <meta name="loc:downloadPdf" content="Download PDF">

      <script type="module" src="./../public/docfx.min.js"></script>

      <script>
        const theme = localStorage.getItem('theme') || 'auto'
        document.documentElement.setAttribute('data-bs-theme', theme === 'auto' ? (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light') : theme)
      </script>

  </head>

  <body class="tex2jax_ignore" data-layout="" data-yaml-mime="ManagedReference">
    <header class="bg-body border-bottom">
      <nav id="autocollapse" class="navbar navbar-expand-md" role="navigation">
        <div class="container-xxl flex-nowrap">
          <a class="navbar-brand" href="../index.html">
            <img id="logo" class="svg" src="../images/logo-small.png" alt="BelNytheraSeiche.TrieDictionary">
            BelNytheraSeiche.TrieDictionary
          </a>
          <button class="btn btn-lg d-md-none border-0" type="button" data-bs-toggle="collapse" data-bs-target="#navpanel" aria-controls="navpanel" aria-expanded="false" aria-label="Toggle navigation">
            <i class="bi bi-three-dots"></i>
          </button>
          <div class="collapse navbar-collapse" id="navpanel">
            <div id="navbar">
              <form class="search" role="search" id="search">
                <i class="bi bi-search"></i>
                <input class="form-control" id="search-query" type="search" disabled placeholder="Search" autocomplete="off" aria-label="Search">
              </form>
            </div>
          </div>
        </div>
      </nav>
    </header>

    <main class="container-xxl">
      <div class="toc-offcanvas">
        <div class="offcanvas-md offcanvas-start" tabindex="-1" id="tocOffcanvas" aria-labelledby="tocOffcanvasLabel">
          <div class="offcanvas-header">
            <h5 class="offcanvas-title" id="tocOffcanvasLabel">Table of Contents</h5>
            <button type="button" class="btn-close" data-bs-dismiss="offcanvas" data-bs-target="#tocOffcanvas" aria-label="Close"></button>
          </div>
          <div class="offcanvas-body">
            <nav class="toc" id="toc"></nav>
          </div>
        </div>
      </div>

      <div class="content">
        <div class="actionbar">
          <button class="btn btn-lg border-0 d-md-none" type="button" data-bs-toggle="offcanvas" data-bs-target="#tocOffcanvas" aria-controls="tocOffcanvas" aria-expanded="false" aria-label="Show table of contents">
            <i class="bi bi-list"></i>
          </button>

          <nav id="breadcrumb"></nav>
        </div>

        <article data-uid="BelNytheraSeiche.TrieDictionary.TreapRecordStore">



  <h1 id="BelNytheraSeiche_TrieDictionary_TreapRecordStore" data-uid="BelNytheraSeiche.TrieDictionary.TreapRecordStore" class="text-break">
Class TreapRecordStore  
  </h1>

  <div class="facts text-secondary">
    <dl><dt>Namespace</dt><dd><a class="xref" href="BelNytheraSeiche.html">BelNytheraSeiche</a>.<a class="xref" href="BelNytheraSeiche.TrieDictionary.html">TrieDictionary</a></dd></dl>
  <dl><dt>Assembly</dt><dd>BelNytheraSeiche.TrieDictionary.dll</dd></dl>
  </div>

  <div class="markdown summary"><p>A concrete implementation of <a class="xref" href="BelNytheraSeiche.TrieDictionary.BinaryTreeRecordStore.html">BinaryTreeRecordStore</a> that uses a Treap.</p>
</div>
  <div class="markdown conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public class TreapRecordStore : BinaryTreeRecordStore, ICloneable</code></pre>
  </div>




  <dl class="typelist inheritance">
    <dt>Inheritance</dt>
    <dd>
      <div><a class="xref" href="https://learn.microsoft.com/dotnet/api/system.object">object</a></div>
      <div><a class="xref" href="BelNytheraSeiche.TrieDictionary.BasicRecordStore.html">BasicRecordStore</a></div>
      <div><a class="xref" href="BelNytheraSeiche.TrieDictionary.BinaryTreeRecordStore.html">BinaryTreeRecordStore</a></div>
      <div><span class="xref">TreapRecordStore</span></div>
    </dd>
  </dl>

  <dl class="typelist implements">
    <dt>Implements</dt>
    <dd>
      <div><a class="xref" href="https://learn.microsoft.com/dotnet/api/system.icloneable">ICloneable</a></div>
    </dd>
  </dl>


  <dl class="typelist inheritedMembers">
    <dt>Inherited Members</dt>
    <dd>
    <div>
      <a class="xref" href="BelNytheraSeiche.TrieDictionary.BinaryTreeRecordStore.html#BelNytheraSeiche_TrieDictionary_BinaryTreeRecordStore_Clear">BinaryTreeRecordStore.Clear()</a>
    </div>
    <div>
      <a class="xref" href="BelNytheraSeiche.TrieDictionary.BinaryTreeRecordStore.html#BelNytheraSeiche_TrieDictionary_BinaryTreeRecordStore_Contains_System_Int32_">BinaryTreeRecordStore.Contains(int)</a>
    </div>
    <div>
      <a class="xref" href="BelNytheraSeiche.TrieDictionary.BinaryTreeRecordStore.html#BelNytheraSeiche_TrieDictionary_BinaryTreeRecordStore_GetRecordAccess_System_Int32_System_Boolean__">BinaryTreeRecordStore.GetRecordAccess(int, out bool)</a>
    </div>
    <div>
      <a class="xref" href="BelNytheraSeiche.TrieDictionary.BinaryTreeRecordStore.html#BelNytheraSeiche_TrieDictionary_BinaryTreeRecordStore_TryGetRecordAccess_System_Int32_BelNytheraSeiche_TrieDictionary_BasicRecordStore_RecordAccess__">BinaryTreeRecordStore.TryGetRecordAccess(int, out BasicRecordStore.RecordAccess)</a>
    </div>
    <div>
      <a class="xref" href="BelNytheraSeiche.TrieDictionary.BinaryTreeRecordStore.html#BelNytheraSeiche_TrieDictionary_BinaryTreeRecordStore_Enumerate">BinaryTreeRecordStore.Enumerate()</a>
    </div>
    <div>
      <a class="xref" href="BelNytheraSeiche.TrieDictionary.BinaryTreeRecordStore.html#BelNytheraSeiche_TrieDictionary_BinaryTreeRecordStore_PrintTree_System_IO_TextWriter_">BinaryTreeRecordStore.PrintTree(TextWriter)</a>
    </div>
    <div>
      <a class="xref" href="BelNytheraSeiche.TrieDictionary.BasicRecordStore.html#BelNytheraSeiche_TrieDictionary_BasicRecordStore_Serialize__1___0_BelNytheraSeiche_TrieDictionary_BasicRecordStore_SerializationOptions_">BasicRecordStore.Serialize&lt;T&gt;(T, BasicRecordStore.SerializationOptions)</a>
    </div>
    <div>
      <a class="xref" href="BelNytheraSeiche.TrieDictionary.BasicRecordStore.html#BelNytheraSeiche_TrieDictionary_BasicRecordStore_Serialize__1___0_System_String_BelNytheraSeiche_TrieDictionary_BasicRecordStore_SerializationOptions_">BasicRecordStore.Serialize&lt;T&gt;(T, string, BasicRecordStore.SerializationOptions)</a>
    </div>
    <div>
      <a class="xref" href="BelNytheraSeiche.TrieDictionary.BasicRecordStore.html#BelNytheraSeiche_TrieDictionary_BasicRecordStore_Serialize__1___0_System_IO_Stream_BelNytheraSeiche_TrieDictionary_BasicRecordStore_SerializationOptions_">BasicRecordStore.Serialize&lt;T&gt;(T, Stream, BasicRecordStore.SerializationOptions)</a>
    </div>
    <div>
      <a class="xref" href="BelNytheraSeiche.TrieDictionary.BasicRecordStore.html#BelNytheraSeiche_TrieDictionary_BasicRecordStore_Deserialize__1_System_Byte___">BasicRecordStore.Deserialize&lt;T&gt;(byte[])</a>
    </div>
    <div>
      <a class="xref" href="BelNytheraSeiche.TrieDictionary.BasicRecordStore.html#BelNytheraSeiche_TrieDictionary_BasicRecordStore_Deserialize__1_System_String_">BasicRecordStore.Deserialize&lt;T&gt;(string)</a>
    </div>
    <div>
      <a class="xref" href="BelNytheraSeiche.TrieDictionary.BasicRecordStore.html#BelNytheraSeiche_TrieDictionary_BasicRecordStore_Deserialize__1_System_IO_Stream_">BasicRecordStore.Deserialize&lt;T&gt;(Stream)</a>
    </div>
    <div>
      <a class="xref" href="BelNytheraSeiche.TrieDictionary.BasicRecordStore.html#BelNytheraSeiche_TrieDictionary_BasicRecordStore_Add_System_Int32_">BasicRecordStore.Add(int)</a>
    </div>
    <div>
      <a class="xref" href="BelNytheraSeiche.TrieDictionary.BasicRecordStore.html#BelNytheraSeiche_TrieDictionary_BasicRecordStore_GetRecordAccess_System_Int32_">BasicRecordStore.GetRecordAccess(int)</a>
    </div>
    <div>
      <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.object.equals#system-object-equals(system-object)">object.Equals(object)</a>
    </div>
    <div>
      <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.object.equals#system-object-equals(system-object-system-object)">object.Equals(object, object)</a>
    </div>
    <div>
      <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.object.gethashcode">object.GetHashCode()</a>
    </div>
    <div>
      <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.object.gettype">object.GetType()</a>
    </div>
    <div>
      <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.object.memberwiseclone">object.MemberwiseClone()</a>
    </div>
    <div>
      <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.object.referenceequals">object.ReferenceEquals(object, object)</a>
    </div>
    <div>
      <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.object.tostring">object.ToString()</a>
    </div>
  </dd></dl>




  <h2 id="BelNytheraSeiche_TrieDictionary_TreapRecordStore_remarks">Remarks</h2>
  <div class="markdown level0 remarks"><p>A Treap is a randomized binary search tree. It maintains the binary search tree property for its keys (identifiers)
and the max-heap property for randomly assigned priorities. This combination maintains balance with high probability,
providing good average-case performance for insertions, deletions, and lookups.</p>
<p>
<strong>Serialization Limits:</strong> The binary serialization format for this class imposes certain constraints on the data.
Exceeding these limits will result in an <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.io.invaliddataexception">InvalidDataException</a> during serialization.
<ul><li><strong>Max Records per List:</strong> A single identifier can have a maximum of 16,777,215 records in its linked list.</li><li><strong>Max Record Content Size:</strong> The <code>Content</code> byte array of any single record cannot exceed 65,535 bytes.</li></ul>

</div>


  <h2 class="section" id="methods">Methods
</h2>


  <a id="BelNytheraSeiche_TrieDictionary_TreapRecordStore_Clone_" data-uid="BelNytheraSeiche.TrieDictionary.TreapRecordStore.Clone*"></a>

  <h3 id="BelNytheraSeiche_TrieDictionary_TreapRecordStore_Clone" data-uid="BelNytheraSeiche.TrieDictionary.TreapRecordStore.Clone">
  Clone()
  
  </h3>

  <div class="markdown level1 summary"><p>Creates a deep copy of the <a class="xref" href="BelNytheraSeiche.TrieDictionary.TreapRecordStore.html">TreapRecordStore</a>.</p>
</div>
  <div class="markdown level1 conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public virtual object Clone()</code></pre>
  </div>


  <h4 class="section">Returns</h4>
  <dl class="parameters">
    <dt><a class="xref" href="https://learn.microsoft.com/dotnet/api/system.object">object</a></dt>
    <dd><p>A new <a class="xref" href="BelNytheraSeiche.TrieDictionary.TreapRecordStore.html">TreapRecordStore</a> instance with the same record data as the original.</p>
</dd>
  </dl>







  <h4 class="section" id="BelNytheraSeiche_TrieDictionary_TreapRecordStore_Clone_remarks">Remarks</h4>
  <div class="markdown level1 remarks"><p>The method creates a new tree and copies all records. The new tree will have newly randomized priorities for its nodes,
so its internal structure may differ from the original, but it will be functionally equivalent.</p>
</div>




  <a id="BelNytheraSeiche_TrieDictionary_TreapRecordStore_Deserialize_" data-uid="BelNytheraSeiche.TrieDictionary.TreapRecordStore.Deserialize*"></a>

  <h3 id="BelNytheraSeiche_TrieDictionary_TreapRecordStore_Deserialize_System_IO_Stream_" data-uid="BelNytheraSeiche.TrieDictionary.TreapRecordStore.Deserialize(System.IO.Stream)">
  Deserialize(Stream)
  
  </h3>

  <div class="markdown level1 summary"><p>Deserializes a <a class="xref" href="BelNytheraSeiche.TrieDictionary.TreapRecordStore.html">TreapRecordStore</a> from a stream.</p>
</div>
  <div class="markdown level1 conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public static TreapRecordStore Deserialize(Stream stream)</code></pre>
  </div>

  <h4 class="section">Parameters</h4>
  <dl class="parameters">
    <dt><code>stream</code> <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.io.stream">Stream</a></dt>
    <dd><p>The stream to read the serialized data from.</p>
</dd>
  </dl>

  <h4 class="section">Returns</h4>
  <dl class="parameters">
    <dt><a class="xref" href="BelNytheraSeiche.TrieDictionary.TreapRecordStore.html">TreapRecordStore</a></dt>
    <dd><p>A new instance of <a class="xref" href="BelNytheraSeiche.TrieDictionary.TreapRecordStore.html">TreapRecordStore</a> reconstructed from the stream.</p>
</dd>
  </dl>








  <h4 class="section">Exceptions</h4>
  <dl class="parameters">
    <dt><a class="xref" href="https://learn.microsoft.com/dotnet/api/system.argumentnullexception">ArgumentNullException</a></dt>
    <dd><p><code class="paramref">stream</code> is null.</p>
</dd>
    <dt><a class="xref" href="https://learn.microsoft.com/dotnet/api/system.io.invaliddataexception">InvalidDataException</a></dt>
    <dd><p>The stream data is corrupted, in an unsupported format, or contains invalid values.</p>
</dd>
  </dl>



  <a id="BelNytheraSeiche_TrieDictionary_TreapRecordStore_IsBalanced_" data-uid="BelNytheraSeiche.TrieDictionary.TreapRecordStore.IsBalanced*"></a>

  <h3 id="BelNytheraSeiche_TrieDictionary_TreapRecordStore_IsBalanced" data-uid="BelNytheraSeiche.TrieDictionary.TreapRecordStore.IsBalanced">
  IsBalanced()
  
  </h3>

  <div class="markdown level1 summary"><p>Overrides the base method to check if the tree is a valid tree.</p>
</div>
  <div class="markdown level1 conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public override bool IsBalanced()</code></pre>
  </div>


  <h4 class="section">Returns</h4>
  <dl class="parameters">
    <dt><a class="xref" href="https://learn.microsoft.com/dotnet/api/system.boolean">bool</a></dt>
    <dd><p>true if the tree satisfies both the binary search tree property (for identifiers) and the max-heap property (for priorities); otherwise, false.</p>
</dd>
  </dl>











  <a id="BelNytheraSeiche_TrieDictionary_TreapRecordStore_Remove_" data-uid="BelNytheraSeiche.TrieDictionary.TreapRecordStore.Remove*"></a>

  <h3 id="BelNytheraSeiche_TrieDictionary_TreapRecordStore_Remove_System_Int32_" data-uid="BelNytheraSeiche.TrieDictionary.TreapRecordStore.Remove(System.Int32)">
  Remove(int)
  
  </h3>

  <div class="markdown level1 summary"><p>Removes the node with the specified identifier from the tree, performing rotations to maintain the heap property before removal.</p>
</div>
  <div class="markdown level1 conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public override void Remove(int identifier)</code></pre>
  </div>

  <h4 class="section">Parameters</h4>
  <dl class="parameters">
    <dt><code>identifier</code> <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.int32">int</a></dt>
    <dd><p>The identifier of the node to remove.</p>
</dd>
  </dl>









  <h4 class="section">Exceptions</h4>
  <dl class="parameters">
    <dt><a class="xref" href="https://learn.microsoft.com/dotnet/api/system.argumentoutofrangeexception">ArgumentOutOfRangeException</a></dt>
    <dd><p><code class="paramref">identifier</code> is <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.int32.minvalue">MinValue</a>.</p>
</dd>
  </dl>



  <a id="BelNytheraSeiche_TrieDictionary_TreapRecordStore_Serialize_" data-uid="BelNytheraSeiche.TrieDictionary.TreapRecordStore.Serialize*"></a>

  <h3 id="BelNytheraSeiche_TrieDictionary_TreapRecordStore_Serialize_BelNytheraSeiche_TrieDictionary_TreapRecordStore_System_IO_Stream_BelNytheraSeiche_TrieDictionary_BasicRecordStore_SerializationOptions_" data-uid="BelNytheraSeiche.TrieDictionary.TreapRecordStore.Serialize(BelNytheraSeiche.TrieDictionary.TreapRecordStore,System.IO.Stream,BelNytheraSeiche.TrieDictionary.BasicRecordStore.SerializationOptions)">
  Serialize(TreapRecordStore, Stream, SerializationOptions?)
  
  </h3>

  <div class="markdown level1 summary"><p>Serializes the entire state of the tree, including node priorities, into a stream.</p>
</div>
  <div class="markdown level1 conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public static void Serialize(TreapRecordStore store, Stream stream, BasicRecordStore.SerializationOptions? options = null)</code></pre>
  </div>

  <h4 class="section">Parameters</h4>
  <dl class="parameters">
    <dt><code>store</code> <a class="xref" href="BelNytheraSeiche.TrieDictionary.TreapRecordStore.html">TreapRecordStore</a></dt>
    <dd><p>The <a class="xref" href="BelNytheraSeiche.TrieDictionary.TreapRecordStore.html">TreapRecordStore</a> instance to serialize.</p>
</dd>
    <dt><code>stream</code> <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.io.stream">Stream</a></dt>
    <dd><p>The stream to write the serialized data to.</p>
</dd>
    <dt><code>options</code> <a class="xref" href="BelNytheraSeiche.TrieDictionary.BasicRecordStore.html">BasicRecordStore</a>.<a class="xref" href="BelNytheraSeiche.TrieDictionary.BasicRecordStore.SerializationOptions.html">SerializationOptions</a></dt>
    <dd><p>Options to control the serialization process. If null, the settings from <a class="xref" href="BelNytheraSeiche.TrieDictionary.BasicRecordStore.SerializationOptions.html#BelNytheraSeiche_TrieDictionary_BasicRecordStore_SerializationOptions_Default">Default</a> will be used.</p>
</dd>
  </dl>








  <h4 class="section" id="BelNytheraSeiche_TrieDictionary_TreapRecordStore_Serialize_BelNytheraSeiche_TrieDictionary_TreapRecordStore_System_IO_Stream_BelNytheraSeiche_TrieDictionary_BasicRecordStore_SerializationOptions__remarks">Remarks</h4>
  <div class="markdown level1 remarks"><p>The serialization format is specific to this tree implementation, using Brotli compression and an XxHash32 checksum for data integrity.</p>
</div>

  <h4 class="section">Exceptions</h4>
  <dl class="parameters">
    <dt><a class="xref" href="https://learn.microsoft.com/dotnet/api/system.argumentnullexception">ArgumentNullException</a></dt>
    <dd><p><code class="paramref">store</code> or <code class="paramref">stream</code> is null.</p>
</dd>
  </dl>




</article>

        <div class="contribution d-print-none">
        </div>


      </div>

      <div class="affix">
        <nav id="affix"></nav>
      </div>
    </main>

    <div class="container-xxl search-results" id="search-results"></div>

    <footer class="border-top text-secondary">
      <div class="container-xxl">
        <div class="flex-fill">
          <span>Made with <a href="https://dotnet.github.io/docfx">docfx</a></span>
        </div>
      </div>
    </footer>
  </body>
</html>
